=== ./tsconfig.json ===
{
  "compilerOptions": {
    "target": "ES2022",
    "useDefineForClassFields": true,
    "module": "ESNext",
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": false,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": false,
    "strictNullChecks": false,
    "strictFunctionTypes": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": false,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
-e 

=== ./package.json ===
{
  "name": "resume-game",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview"
  },
  "devDependencies": {
    "typescript": "~5.9.3",
    "vite": "^7.2.4"
  },
  "dependencies": {
    "phaser": "^3.90.0",
    "phaser3-rex-plugins": "^1.80.17"
  }
}
-e 

=== ./package-lock.json ===
{
  "name": "resume-game",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "resume-game",
      "version": "0.0.0",
      "dependencies": {
        "phaser": "^3.90.0",
        "phaser3-rex-plugins": "^1.80.17"
      },
      "devDependencies": {
        "typescript": "~5.9.3",
        "vite": "^7.2.4"
      }
    },
    "node_modules/@babel/runtime": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/runtime/-/runtime-7.28.4.tgz",
      "integrity": "sha512-Q/N6JNWvIvPnLDvjlE1OUBLPQHH6l3CltCEsHIujp45zQUSSh8K+gHnaEX45yAT1nyngnINhvWtzN+Nb9D8RAQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.27.2.tgz",
      "integrity": "sha512-GZMB+a0mOMZs4MpDbj8RJp4cw+w1WV5NYD6xzgvzUJ5Ek2jerwfO2eADyI6ExDSUED+1X8aMbegahsJi+8mgpw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.27.2.tgz",
      "integrity": "sha512-DVNI8jlPa7Ujbr1yjU2PfUSRtAUZPG9I1RwW4F4xFB1Imiu2on0ADiI/c3td+KmDtVKNbi+nffGDQMfcIMkwIA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.27.2.tgz",
      "integrity": "sha512-pvz8ZZ7ot/RBphf8fv60ljmaoydPU12VuXHImtAs0XhLLw+EXBi2BLe3OYSBslR4rryHvweW5gmkKFwTiFy6KA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.27.2.tgz",
      "integrity": "sha512-z8Ank4Byh4TJJOh4wpz8g2vDy75zFL0TlZlkUkEwYXuPSgX8yzep596n6mT7905kA9uHZsf/o2OJZubl2l3M7A==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.27.2.tgz",
      "integrity": "sha512-davCD2Zc80nzDVRwXTcQP/28fiJbcOwvdolL0sOiOsbwBa72kegmVU0Wrh1MYrbuCL98Omp5dVhQFWRKR2ZAlg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.27.2.tgz",
      "integrity": "sha512-ZxtijOmlQCBWGwbVmwOF/UCzuGIbUkqB1faQRf5akQmxRJ1ujusWsb3CVfk/9iZKr2L5SMU5wPBi1UWbvL+VQA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.27.2.tgz",
      "integrity": "sha512-lS/9CN+rgqQ9czogxlMcBMGd+l8Q3Nj1MFQwBZJyoEKI50XGxwuzznYdwcav6lpOGv5BqaZXqvBSiB/kJ5op+g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.27.2.tgz",
      "integrity": "sha512-tAfqtNYb4YgPnJlEFu4c212HYjQWSO/w/h/lQaBK7RbwGIkBOuNKQI9tqWzx7Wtp7bTPaGC6MJvWI608P3wXYA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.27.2.tgz",
      "integrity": "sha512-vWfq4GaIMP9AIe4yj1ZUW18RDhx6EPQKjwe7n8BbIecFtCQG4CfHGaHuh7fdfq+y3LIA2vGS/o9ZBGVxIDi9hw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.27.2.tgz",
      "integrity": "sha512-hYxN8pr66NsCCiRFkHUAsxylNOcAQaxSSkHMMjcpx0si13t1LHFphxJZUiGwojB1a/Hd5OiPIqDdXONia6bhTw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.27.2.tgz",
      "integrity": "sha512-MJt5BRRSScPDwG2hLelYhAAKh9imjHK5+NE/tvnRLbIqUWa+0E9N4WNMjmp/kXXPHZGqPLxggwVhz7QP8CTR8w==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.27.2.tgz",
      "integrity": "sha512-lugyF1atnAT463aO6KPshVCJK5NgRnU4yb3FUumyVz+cGvZbontBgzeGFO1nF+dPueHD367a2ZXe1NtUkAjOtg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.27.2.tgz",
      "integrity": "sha512-nlP2I6ArEBewvJ2gjrrkESEZkB5mIoaTswuqNFRv/WYd+ATtUpe9Y09RnJvgvdag7he0OWgEZWhviS1OTOKixw==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.27.2.tgz",
      "integrity": "sha512-C92gnpey7tUQONqg1n6dKVbx3vphKtTHJaNG2Ok9lGwbZil6DrfyecMsp9CrmXGQJmZ7iiVXvvZH6Ml5hL6XdQ==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.27.2.tgz",
      "integrity": "sha512-B5BOmojNtUyN8AXlK0QJyvjEZkWwy/FKvakkTDCziX95AowLZKR6aCDhG7LeF7uMCXEJqwa8Bejz5LTPYm8AvA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.27.2.tgz",
      "integrity": "sha512-p4bm9+wsPwup5Z8f4EpfN63qNagQ47Ua2znaqGH6bqLlmJ4bx97Y9JdqxgGZ6Y8xVTixUnEkoKSHcpRlDnNr5w==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.27.2.tgz",
      "integrity": "sha512-uwp2Tip5aPmH+NRUwTcfLb+W32WXjpFejTIOWZFw/v7/KnpCDKG66u4DLcurQpiYTiYwQ9B7KOeMJvLCu/OvbA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.27.2.tgz",
      "integrity": "sha512-Kj6DiBlwXrPsCRDeRvGAUb/LNrBASrfqAIok+xB0LxK8CHqxZ037viF13ugfsIpePH93mX7xfJp97cyDuTZ3cw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.27.2.tgz",
      "integrity": "sha512-HwGDZ0VLVBY3Y+Nw0JexZy9o/nUAWq9MlV7cahpaXKW6TOzfVno3y3/M8Ga8u8Yr7GldLOov27xiCnqRZf0tCA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.27.2.tgz",
      "integrity": "sha512-DNIHH2BPQ5551A7oSHD0CKbwIA/Ox7+78/AWkbS5QoRzaqlev2uFayfSxq68EkonB+IKjiuxBFoV8ESJy8bOHA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.27.2.tgz",
      "integrity": "sha512-/it7w9Nb7+0KFIzjalNJVR5bOzA9Vay+yIPLVHfIQYG/j+j9VTH84aNB8ExGKPU4AzfaEvN9/V4HV+F+vo8OEg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openharmony-arm64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.27.2.tgz",
      "integrity": "sha512-LRBbCmiU51IXfeXk59csuX/aSaToeG7w48nMwA6049Y4J4+VbWALAuXcs+qcD04rHDuSCSRKdmY63sruDS5qag==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.27.2.tgz",
      "integrity": "sha512-kMtx1yqJHTmqaqHPAzKCAkDaKsffmXkPHThSfRwZGyuqyIeBvf08KSsYXl+abf5HDAPMJIPnbBfXvP2ZC2TfHg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.27.2.tgz",
      "integrity": "sha512-Yaf78O/B3Kkh+nKABUF++bvJv5Ijoy9AN1ww904rOXZFLWVc5OLOfL56W+C8F9xn5JQZa3UX6m+IktJnIb1Jjg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.27.2.tgz",
      "integrity": "sha512-Iuws0kxo4yusk7sw70Xa2E2imZU5HoixzxfGCdxwBdhiDgt9vX9VUCBhqcwY7/uh//78A1hMkkROMJq9l27oLQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.27.2.tgz",
      "integrity": "sha512-sRdU18mcKf7F+YgheI/zGf5alZatMUTKj/jNS6l744f9u3WFu4v7twcUI9vu4mknF4Y9aDlblIie0IM+5xxaqQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.54.0.tgz",
      "integrity": "sha512-OywsdRHrFvCdvsewAInDKCNyR3laPA2mc9bRYJ6LBp5IyvF3fvXbbNR0bSzHlZVFtn6E0xw2oZlyjg4rKCVcng==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.54.0.tgz",
      "integrity": "sha512-Skx39Uv+u7H224Af+bDgNinitlmHyQX1K/atIA32JP3JQw6hVODX5tkbi2zof/E69M1qH2UoN3Xdxgs90mmNYw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.54.0.tgz",
      "integrity": "sha512-k43D4qta/+6Fq+nCDhhv9yP2HdeKeP56QrUUTW7E6PhZP1US6NDqpJj4MY0jBHlJivVJD5P8NxrjuobZBJTCRw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.54.0.tgz",
      "integrity": "sha512-cOo7biqwkpawslEfox5Vs8/qj83M/aZCSSNIWpVzfU2CYHa2G3P1UN5WF01RdTHSgCkri7XOlTdtk17BezlV3A==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.54.0.tgz",
      "integrity": "sha512-miSvuFkmvFbgJ1BevMa4CPCFt5MPGw094knM64W9I0giUIMMmRYcGW/JWZDriaw/k1kOBtsWh1z6nIFV1vPNtA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.54.0.tgz",
      "integrity": "sha512-KGXIs55+b/ZfZsq9aR026tmr/+7tq6VG6MsnrvF4H8VhwflTIuYh+LFUlIsRdQSgrgmtM3fVATzEAj4hBQlaqQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.54.0.tgz",
      "integrity": "sha512-EHMUcDwhtdRGlXZsGSIuXSYwD5kOT9NVnx9sqzYiwAc91wfYOE1g1djOEDseZJKKqtHAHGwnGPQu3kytmfaXLQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.54.0.tgz",
      "integrity": "sha512-+pBrqEjaakN2ySv5RVrj/qLytYhPKEUwk+e3SFU5jTLHIcAtqh2rLrd/OkbNuHJpsBgxsD8ccJt5ga/SeG0JmA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.54.0.tgz",
      "integrity": "sha512-NSqc7rE9wuUaRBsBp5ckQ5CVz5aIRKCwsoa6WMF7G01sX3/qHUw/z4pv+D+ahL1EIKy6Enpcnz1RY8pf7bjwng==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.54.0.tgz",
      "integrity": "sha512-gr5vDbg3Bakga5kbdpqx81m2n9IX8M6gIMlQQIXiLTNeQW6CucvuInJ91EuCJ/JYvc+rcLLsDFcfAD1K7fMofg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.54.0.tgz",
      "integrity": "sha512-gsrtB1NA3ZYj2vq0Rzkylo9ylCtW/PhpLEivlgWe0bpgtX5+9j9EZa0wtZiCjgu6zmSeZWyI/e2YRX1URozpIw==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.54.0.tgz",
      "integrity": "sha512-y3qNOfTBStmFNq+t4s7Tmc9hW2ENtPg8FeUD/VShI7rKxNW7O4fFeaYbMsd3tpFlIg1Q8IapFgy7Q9i2BqeBvA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.54.0.tgz",
      "integrity": "sha512-89sepv7h2lIVPsFma8iwmccN7Yjjtgz0Rj/Ou6fEqg3HDhpCa+Et+YSufy27i6b0Wav69Qv4WBNl3Rs6pwhebQ==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.54.0.tgz",
      "integrity": "sha512-ZcU77ieh0M2Q8Ur7D5X7KvK+UxbXeDHwiOt/CPSBTI1fBmeDMivW0dPkdqkT4rOgDjrDDBUed9x4EgraIKoR2A==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.54.0.tgz",
      "integrity": "sha512-2AdWy5RdDF5+4YfG/YesGDDtbyJlC9LHmL6rZw6FurBJ5n4vFGupsOBGfwMRjBYH7qRQowT8D/U4LoSvVwOhSQ==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.54.0.tgz",
      "integrity": "sha512-WGt5J8Ij/rvyqpFexxk3ffKqqbLf9AqrTBbWDk7ApGUzaIs6V+s2s84kAxklFwmMF/vBNGrVdYgbblCOFFezMQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.54.0.tgz",
      "integrity": "sha512-JzQmb38ATzHjxlPHuTH6tE7ojnMKM2kYNzt44LO/jJi8BpceEC8QuXYA908n8r3CNuG/B3BV8VR3Hi1rYtmPiw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.54.0.tgz",
      "integrity": "sha512-huT3fd0iC7jigGh7n3q/+lfPcXxBi+om/Rs3yiFxjvSxbSB6aohDFXbWvlspaqjeOh+hx7DDHS+5Es5qRkWkZg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.54.0.tgz",
      "integrity": "sha512-c2V0W1bsKIKfbLMBu/WGBz6Yci8nJ/ZJdheE0EwB73N3MvHYKiKGs3mVilX4Gs70eGeDaMqEob25Tw2Gb9Nqyw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.54.0.tgz",
      "integrity": "sha512-woEHgqQqDCkAzrDhvDipnSirm5vxUXtSKDYTVpZG3nUdW/VVB5VdCYA2iReSj/u3yCZzXID4kuKG7OynPnB3WQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.54.0.tgz",
      "integrity": "sha512-dzAc53LOuFvHwbCEOS0rPbXp6SIhAf2txMP5p6mGyOXXw5mWY8NGGbPMPrs4P1WItkfApDathBj/NzMLUZ9rtQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.54.0.tgz",
      "integrity": "sha512-hYT5d3YNdSh3mbCU1gwQyPgQd3T2ne0A3KG8KSBdav5TiBg6eInVmV+TeR5uHufiIgSFg0XsOWGW5/RhNcSvPg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "license": "Python-2.0"
    },
    "node_modules/cross-fetch": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/cross-fetch/-/cross-fetch-4.0.0.tgz",
      "integrity": "sha512-e4a5N8lVvuLgAWgnCrLr2PP0YyDOTHa9H/Rj54dirp61qXnNq46m82bRhNqIA5VccJtWBvPTFRV3TtvHUKPB1g==",
      "license": "MIT",
      "dependencies": {
        "node-fetch": "^2.6.12"
      }
    },
    "node_modules/dagre": {
      "version": "0.8.5",
      "resolved": "https://registry.npmjs.org/dagre/-/dagre-0.8.5.tgz",
      "integrity": "sha512-/aTqmnRta7x7MCCpExk7HQL2O4owCT2h8NT//9I1OQ9vt29Pa0BzSAkR5lwFUcQ7491yVi/3CXU9jQ5o0Mn2Sw==",
      "license": "MIT",
      "dependencies": {
        "graphlib": "^2.1.8",
        "lodash": "^4.17.15"
      }
    },
    "node_modules/esbuild": {
      "version": "0.27.2",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.27.2.tgz",
      "integrity": "sha512-HyNQImnsOC7X9PMNaCIeAm4ISCQXs5a5YasTXVliKv4uuBo1dKrG0A+uQS8M5eXjVMnLg3WgXaKvprHlFJQffw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.27.2",
        "@esbuild/android-arm": "0.27.2",
        "@esbuild/android-arm64": "0.27.2",
        "@esbuild/android-x64": "0.27.2",
        "@esbuild/darwin-arm64": "0.27.2",
        "@esbuild/darwin-x64": "0.27.2",
        "@esbuild/freebsd-arm64": "0.27.2",
        "@esbuild/freebsd-x64": "0.27.2",
        "@esbuild/linux-arm": "0.27.2",
        "@esbuild/linux-arm64": "0.27.2",
        "@esbuild/linux-ia32": "0.27.2",
        "@esbuild/linux-loong64": "0.27.2",
        "@esbuild/linux-mips64el": "0.27.2",
        "@esbuild/linux-ppc64": "0.27.2",
        "@esbuild/linux-riscv64": "0.27.2",
        "@esbuild/linux-s390x": "0.27.2",
        "@esbuild/linux-x64": "0.27.2",
        "@esbuild/netbsd-arm64": "0.27.2",
        "@esbuild/netbsd-x64": "0.27.2",
        "@esbuild/openbsd-arm64": "0.27.2",
        "@esbuild/openbsd-x64": "0.27.2",
        "@esbuild/openharmony-arm64": "0.27.2",
        "@esbuild/sunos-x64": "0.27.2",
        "@esbuild/win32-arm64": "0.27.2",
        "@esbuild/win32-ia32": "0.27.2",
        "@esbuild/win32-x64": "0.27.2"
      }
    },
    "node_modules/eventemitter3": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/eventemitter3/-/eventemitter3-5.0.1.tgz",
      "integrity": "sha512-GWkBvjiSZK87ELrYOSESUYeVIc9mvLLf/nXalMOS5dYrgZq9o5OVkbZAVM06CVxYsCwH9BDZFPlQTlPA1j4ahA==",
      "license": "MIT"
    },
    "node_modules/events": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/events/-/events-3.3.0.tgz",
      "integrity": "sha512-mQw+2fkQbALzQ7V0MY0IqdnXNOeTtP4r0lN9z7AAawCXgqea7bDii20AYrIBrFd/Hx0M2Ocz6S111CaFkUcb0Q==",
      "license": "MIT",
      "engines": {
        "node": ">=0.8.x"
      }
    },
    "node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/graphlib": {
      "version": "2.1.8",
      "resolved": "https://registry.npmjs.org/graphlib/-/graphlib-2.1.8.tgz",
      "integrity": "sha512-jcLLfkpoVGmH7/InMC/1hIvOPSUh38oJtGhvrOFGzioE1DZ+0YW16RgmOJhHiuWTvGiJQ9Z1Ik43JvkRPRvE+A==",
      "license": "MIT",
      "dependencies": {
        "lodash": "^4.17.15"
      }
    },
    "node_modules/graphology": {
      "version": "0.25.4",
      "resolved": "https://registry.npmjs.org/graphology/-/graphology-0.25.4.tgz",
      "integrity": "sha512-33g0Ol9nkWdD6ulw687viS8YJQBxqG5LWII6FI6nul0pq6iM2t5EKquOTFDbyTblRB3O9I+7KX4xI8u5ffekAQ==",
      "license": "MIT",
      "dependencies": {
        "events": "^3.3.0",
        "obliterator": "^2.0.2"
      },
      "peerDependencies": {
        "graphology-types": ">=0.24.0"
      }
    },
    "node_modules/graphology-types": {
      "version": "0.24.8",
      "resolved": "https://registry.npmjs.org/graphology-types/-/graphology-types-0.24.8.tgz",
      "integrity": "sha512-hDRKYXa8TsoZHjgEaysSRyPdT6uB78Ci8WnjgbStlQysz7xR52PInxNsmnB7IBOM1BhikxkNyCVEFgmPKnpx3Q==",
      "license": "MIT",
      "peer": true
    },
    "node_modules/i18next": {
      "version": "22.5.1",
      "resolved": "https://registry.npmjs.org/i18next/-/i18next-22.5.1.tgz",
      "integrity": "sha512-8TGPgM3pAD+VRsMtUMNknRz3kzqwp/gPALrWMsDnmC1mKqJwpWyooQRLMcbTwq8z8YwSmuj+ZYvc+xCuEpkssA==",
      "funding": [
        {
          "type": "individual",
          "url": "https://locize.com"
        },
        {
          "type": "individual",
          "url": "https://locize.com/i18next.html"
        },
        {
          "type": "individual",
          "url": "https://www.i18next.com/how-to/faq#i18next-is-awesome.-how-can-i-support-the-project"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.20.6"
      }
    },
    "node_modules/i18next-http-backend": {
      "version": "2.7.3",
      "resolved": "https://registry.npmjs.org/i18next-http-backend/-/i18next-http-backend-2.7.3.tgz",
      "integrity": "sha512-FgZxrXdRA5u44xfYsJlEBL4/KH3f2IluBpgV/7riW0YW2VEyM8FzVt2XHAOi6id0Ppj7vZvCZVpp5LrGXnc8Ig==",
      "license": "MIT",
      "dependencies": {
        "cross-fetch": "4.0.0"
      }
    },
    "node_modules/js-yaml": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.1.tgz",
      "integrity": "sha512-qQKT4zQxXl8lLwBtHMWwaTcGfFOZviOJet3Oy/xmGk2gZH677CJM9EvtfdSkgWcATZhj/55JZ0rmy3myCT5lsA==",
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/lodash": {
      "version": "4.17.21",
      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
      "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==",
      "license": "MIT"
    },
    "node_modules/mustache": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/mustache/-/mustache-4.2.0.tgz",
      "integrity": "sha512-71ippSywq5Yb7/tVYyGbkBggbU8H3u5Rz56fH60jGFgr8uHwxs+aSKeqmluIVzM0m0kB7xQjKS6qPfd0b2ZoqQ==",
      "license": "MIT",
      "bin": {
        "mustache": "bin/mustache"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/node-fetch": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.7.0.tgz",
      "integrity": "sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==",
      "license": "MIT",
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      },
      "peerDependencies": {
        "encoding": "^0.1.0"
      },
      "peerDependenciesMeta": {
        "encoding": {
          "optional": true
        }
      }
    },
    "node_modules/obliterator": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/obliterator/-/obliterator-2.0.5.tgz",
      "integrity": "sha512-42CPE9AhahZRsMNslczq0ctAEtqk8Eka26QofnqC346BZdHDySk3LWka23LI7ULIw11NmltpiLagIq8gBozxTw==",
      "license": "MIT"
    },
    "node_modules/papaparse": {
      "version": "5.5.3",
      "resolved": "https://registry.npmjs.org/papaparse/-/papaparse-5.5.3.tgz",
      "integrity": "sha512-5QvjGxYVjxO59MGU2lHVYpRWBBtKHnlIAcSe1uNFCkkptUh63NFRj0FJQm7nR67puEruUci/ZkjmEFrjCAyP4A==",
      "license": "MIT"
    },
    "node_modules/phaser": {
      "version": "3.90.0",
      "resolved": "https://registry.npmjs.org/phaser/-/phaser-3.90.0.tgz",
      "integrity": "sha512-/cziz/5ZIn02uDkC9RzN8VF9x3Gs3XdFFf9nkiMEQT3p7hQlWuyjy4QWosU802qqno2YSLn2BfqwOKLv/sSVfQ==",
      "license": "MIT",
      "dependencies": {
        "eventemitter3": "^5.0.1"
      }
    },
    "node_modules/phaser3-rex-plugins": {
      "version": "1.80.17",
      "resolved": "https://registry.npmjs.org/phaser3-rex-plugins/-/phaser3-rex-plugins-1.80.17.tgz",
      "integrity": "sha512-0xNgjA2rbh9323hP1dFwasYgKO1CyYJO6PwznnNTaWnn8ksbg9VQhprpAp4ASxSPkfn1ISgzxw8LqWjNJK8Rew==",
      "license": "MIT",
      "dependencies": {
        "dagre": "^0.8.5",
        "eventemitter3": "^3.1.2",
        "graphology": "^0.25.4",
        "i18next": "^22.5.1",
        "i18next-http-backend": "^2.5.2",
        "js-yaml": "^4.1.0",
        "mustache": "^4.2.0",
        "papaparse": "^5.4.1",
        "webfontloader": "^1.6.28"
      }
    },
    "node_modules/phaser3-rex-plugins/node_modules/eventemitter3": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/eventemitter3/-/eventemitter3-3.1.2.tgz",
      "integrity": "sha512-tvtQIeLVHjDkJYnzf2dgVMxfuSGJeM/7UCG17TT4EumTfNtF+0nebF/4zWOIkCreAbtNqhGEboB6BWrwqNaw4Q==",
      "license": "MIT"
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/rollup": {
      "version": "4.54.0",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.54.0.tgz",
      "integrity": "sha512-3nk8Y3a9Ea8szgKhinMlGMhGMw89mqule3KWczxhIzqudyHdCIOHw8WJlj/r329fACjKLEh13ZSk7oE22kyeIw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.54.0",
        "@rollup/rollup-android-arm64": "4.54.0",
        "@rollup/rollup-darwin-arm64": "4.54.0",
        "@rollup/rollup-darwin-x64": "4.54.0",
        "@rollup/rollup-freebsd-arm64": "4.54.0",
        "@rollup/rollup-freebsd-x64": "4.54.0",
        "@rollup/rollup-linux-arm-gnueabihf": "4.54.0",
        "@rollup/rollup-linux-arm-musleabihf": "4.54.0",
        "@rollup/rollup-linux-arm64-gnu": "4.54.0",
        "@rollup/rollup-linux-arm64-musl": "4.54.0",
        "@rollup/rollup-linux-loong64-gnu": "4.54.0",
        "@rollup/rollup-linux-ppc64-gnu": "4.54.0",
        "@rollup/rollup-linux-riscv64-gnu": "4.54.0",
        "@rollup/rollup-linux-riscv64-musl": "4.54.0",
        "@rollup/rollup-linux-s390x-gnu": "4.54.0",
        "@rollup/rollup-linux-x64-gnu": "4.54.0",
        "@rollup/rollup-linux-x64-musl": "4.54.0",
        "@rollup/rollup-openharmony-arm64": "4.54.0",
        "@rollup/rollup-win32-arm64-msvc": "4.54.0",
        "@rollup/rollup-win32-ia32-msvc": "4.54.0",
        "@rollup/rollup-win32-x64-gnu": "4.54.0",
        "@rollup/rollup-win32-x64-msvc": "4.54.0",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw==",
      "license": "MIT"
    },
    "node_modules/typescript": {
      "version": "5.9.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
      "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/vite": {
      "version": "7.3.0",
      "resolved": "https://registry.npmjs.org/vite/-/vite-7.3.0.tgz",
      "integrity": "sha512-dZwN5L1VlUBewiP6H9s2+B3e3Jg96D0vzN+Ry73sOefebhYr9f94wwkMNN/9ouoU8pV1BqA1d1zGk8928cx0rg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.27.0",
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3",
        "postcss": "^8.5.6",
        "rollup": "^4.43.0",
        "tinyglobby": "^0.2.15"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^20.19.0 || >=22.12.0",
        "jiti": ">=1.21.0",
        "less": "^4.0.0",
        "lightningcss": "^1.21.0",
        "sass": "^1.70.0",
        "sass-embedded": "^1.70.0",
        "stylus": ">=0.54.8",
        "sugarss": "^5.0.0",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/webfontloader": {
      "version": "1.6.28",
      "resolved": "https://registry.npmjs.org/webfontloader/-/webfontloader-1.6.28.tgz",
      "integrity": "sha512-Egb0oFEga6f+nSgasH3E0M405Pzn6y3/9tOVanv/DLfa1YBIgcv90L18YyWnvXkRbIM17v5Kv6IT2N6g1x5tvQ==",
      "license": "Apache-2.0"
    },
    "node_modules/webidl-conversions": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
      "integrity": "sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ==",
      "license": "BSD-2-Clause"
    },
    "node_modules/whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==",
      "license": "MIT",
      "dependencies": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      }
    }
  }
}
-e 

=== ./src/counter.ts ===
export function setupCounter(element: HTMLButtonElement) {
  let counter = 0
  const setCounter = (count: number) => {
    counter = count
    element.innerHTML = `count is ${counter}`
  }
  element.addEventListener('click', () => setCounter(counter + 1))
  setCounter(0)
}
-e 

=== ./src/entities/Player.ts ===
import { Scene } from "phaser";
import { DEPTH } from "../config/Layers";
import { UIScene } from "../game/scenes/UiScene";

export class Player extends Phaser.Physics.Arcade.Sprite {
  declare body: Phaser.Physics.Arcade.Body;

  private speed: number = 100;
  private lastDirection: "down" | "up" | "right" | "left" =
    "down";
  private cursors: Phaser.Types.Input.Keyboard.CursorKeys;
  private uiScene: UIScene | null = null;

  // Teclas WASD
  private keyW!: Phaser.Input.Keyboard.Key;
  private keyA!: Phaser.Input.Keyboard.Key;
  private keyS!: Phaser.Input.Keyboard.Key;
  private keyD!: Phaser.Input.Keyboard.Key;

  constructor(
    scene: Scene,
    x: number,
    y: number,
    spriteKey?: string
  ) {
    // Use o spriteKey passado ou pegue do registry com fallback
    const spriteToUse =
      spriteKey ||
      scene.registry.get("playerSprite") ||
      "male-run";

    super(scene, x, y, spriteToUse, 0);

    scene.add.existing(this);
    scene.physics.add.existing(this);

    this.setCollideWorldBounds(true);
    this.setDepth(DEPTH.PLAYER);

    // Hitbox padrão para todos (ajuste conforme necessidade)
    this.body?.setSize(10, 20);
    this.body?.setOffset(1.5, 8);

    this.setupInput(scene);
    this.createAnimations(spriteToUse);
    this.setFacing("down");
  }

  private setupInput(scene: Scene) {
    if (scene.input.keyboard) {
      this.cursors =
        scene.input.keyboard.createCursorKeys();

      this.keyW = scene.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.W
      );
      this.keyA = scene.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.A
      );
      this.keyS = scene.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.S
      );
      this.keyD = scene.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.D
      );
    }
  }

  public setFacing(
    direction: "up" | "down" | "right" | "left"
  ) {
    this.lastDirection = direction;
    this.anims.stop();
    this.setStaticFrame(direction);
  }

  public setUIScene(uiScene: UIScene) {
    this.uiScene = uiScene;
  }

  update() {
    this.handleMovement();
  }

  public stopMovement() {
    this.body?.setVelocity(0);
    this.setStaticFrame(this.lastDirection);
  }

  private handleMovement() {
    const body = this.body as Phaser.Physics.Arcade.Body;
    let velocityX = 0;
    let velocityY = 0;

    // Setas
    if (this.cursors?.left.isDown) velocityX = -1;
    else if (this.cursors?.right.isDown) velocityX = 1;

    if (this.cursors?.up.isDown) velocityY = -1;
    else if (this.cursors?.down.isDown) velocityY = 1;

    // WASD
    if (this.keyA?.isDown) velocityX = -1;
    else if (this.keyD?.isDown) velocityX = 1;

    if (this.keyW?.isDown) velocityY = -1;
    else if (this.keyS?.isDown) velocityY = 1;

    // Joystick
    if (this.uiScene && this.uiScene.joystickCursorKeys) {
      const joy = this.uiScene.joystickCursorKeys;
      if (joy.left.isDown) velocityX = -1;
      else if (joy.right.isDown) velocityX = 1;

      if (joy.up.isDown) velocityY = -1;
      else if (joy.down.isDown) velocityY = 1;
    }

    const vector = new Phaser.Math.Vector2(
      velocityX,
      velocityY
    ).normalize();
    body.setVelocity(
      vector.x * this.speed,
      vector.y * this.speed
    );

    const isMoving =
      body.velocity.x !== 0 || body.velocity.y !== 0;

    if (isMoving) {
      if (
        Math.abs(body.velocity.x) >
        Math.abs(body.velocity.y)
      ) {
        // Movimento horizontal
        if (body.velocity.x > 0) {
          this.play("run-right", true);
          this.setFlipX(false);
          this.lastDirection = "right";
        } else {
          this.play("run-left", true);
          this.setFlipX(false);
          this.lastDirection = "left";
        }
      } else {
        // Movimento vertical
        this.setFlipX(false);
        if (body.velocity.y > 0) {
          this.play("run-down", true);
          this.lastDirection = "down";
        } else {
          this.play("run-up", true);
          this.lastDirection = "up";
        }
      }
    } else {
      this.setStaticFrame(this.lastDirection);
    }
  }

  private setStaticFrame(
    direction: "down" | "up" | "right" | "left"
  ) {
    this.anims.stop();

    // Usa o primeiro frame de cada animação como frame estático
    switch (direction) {
      case "down":
        this.setFrame(6); // Primeiro frame da animação "down"
        break;
      case "right":
        this.setFrame(3); // Primeiro frame da animação "right"
        break;
      case "up":
        this.setFrame(0); // Primeiro frame da animação "up"
        break;
      case "left":
        this.setFrame(9); // Primeiro frame da animação "left"
        break;
    }
  }

  private createAnimations(spriteKey: string) {
    const anims = this.scene.anims;

    // Verifica se as animações JÁ EXISTEM (globalmente)
    // Isso evita criar animações duplicadas que causam o erro
    if (anims.exists("run-up")) {
      console.log(
        `Animações já existem, reutilizando para ${spriteKey}`
      );
      return;
    }

    console.log(
      `Criando animações para sprite: ${spriteKey}`
    );

    // CRIA ANIMAÇÕES GLOBAIS (uma vez só)
    // Elas funcionam para QUALQUER sprite que tenha a mesma organização

    // 1. CIMA - frames 0, 1, 2
    anims.create({
      key: "run-up",
      frames: anims.generateFrameNumbers(spriteKey, {
        start: 0,
        end: 2,
      }),
      frameRate: 9,
      repeat: -1,
    });

    // 2. DIREITA - frames 3, 4, 5
    anims.create({
      key: "run-right",
      frames: anims.generateFrameNumbers(spriteKey, {
        start: 3,
        end: 5,
      }),
      frameRate: 9,
      repeat: -1,
    });

    // 3. BAIXO - frames 6, 7, 8
    anims.create({
      key: "run-down",
      frames: anims.generateFrameNumbers(spriteKey, {
        start: 6,
        end: 8,
      }),
      frameRate: 9,
      repeat: -1,
    });

    // 4. ESQUERDA - frames 9, 10, 11
    anims.create({
      key: "run-left",
      frames: anims.generateFrameNumbers(spriteKey, {
        start: 9,
        end: 11,
      }),
      frameRate: 9,
      repeat: -1,
    });

    console.log("Animações criadas com sucesso!");
  }
}
-e 

=== ./src/game/ui/DialogBox.ts ===
import { Scene } from "phaser";

export class DialogBox extends Phaser.GameObjects
  .Container {
  private box: Phaser.GameObjects.Graphics;
  private text: Phaser.GameObjects.Text;

  private typingSpeed = 30;
  private eventTimer?: Phaser.Time.TimerEvent;
  private targetText: string = "";
  private currentText: string = "";
  private charIndex: number = 0;

  constructor(scene: Scene) {
    super(scene, 0, 0);
    this.setName("DialogBox");

    // 1. Cria os objetos UMA VEZ SÓ aqui no construtor
    this.box = new Phaser.GameObjects.Graphics(scene);
    this.add(this.box);

    this.text = new Phaser.GameObjects.Text(
      scene,
      0,
      0,
      "",
      {
        fontFamily: "VT323",
        fontSize: "14px",
        color: "#ffffff",
        wordWrap: { width: 100 }, // Valor inicial, será atualizado no show
      }
    );
    this.add(this.text);

    this.setVisible(false);
    scene.add.existing(this);
  }

  // Método auxiliar para desenhar o fundo (não cria novos objetos, só desenha)
  private updateBoxGeometry(
    width: number,
    height: number
  ): void {
    this.box.clear(); // <--- OBRIGATÓRIO: Limpa o desenho anterior

    this.box.fillStyle(0x000000, 0.9);
    this.box.lineStyle(2, 0xffffff, 1);

    // Desenha centrado no container
    const x = 0;
    const y = -height + height / 2; // Ajuste baseado na sua lógica anterior

    this.box.fillRoundedRect(x, y, width, height, 5);
    this.box.strokeRoundedRect(x, y, width, height, 5);

    // Reposiciona e redimensiona o texto
    this.text.setPosition(x + 10, y + 10);
    this.text.setStyle({ wordWrap: { width: width - 20 } });
  }

  public show(
    message: string,
    width: number = 300,
    height: number = 100
  ) {
    // 1. Atualiza o visual
    this.updateBoxGeometry(width, height);

    // 2. Reseta lógica
    this.cleanup();
    this.targetText = message;
    this.currentText = "";
    this.charIndex = 0;
    this.text.setText(""); // Começa vazio

    this.setVisible(true);

    // 3. Timer
    this.eventTimer = this.scene.time.addEvent({
      delay: this.typingSpeed,
      callback: this.typeNextChar,
      callbackScope: this,
      loop: true,
    });
  }

  private typeNextChar() {
    if (this.charIndex >= this.targetText.length) {
      this.cleanup();
      return;
    }

    const nextChar = this.targetText[this.charIndex];
    this.currentText += nextChar;
    this.text.setText(this.currentText);
    this.charIndex++;
  }

  public hide() {
    this.cleanup();
    this.setVisible(false);
  }

  private cleanup() {
    if (this.eventTimer) {
      this.eventTimer.remove();
      this.eventTimer = undefined;
    }
  }
}
-e 

=== ./src/game/scenes/intro/IntroScene.ts ===
import { Scene } from "phaser";
import { PlayerGender } from "./types/IntroTypes";
import { INTRO_CONFIG } from "./config/IntroConfig";
import {
  INTRO_STEPS,
  getWelcomePronoun,
} from "./config/IntroSteps";
import { CharacterWithAura } from "./components/CharacterWithAura";
import { FaceFrame } from "./components/FaceFrame";
import { GenderOptions } from "./components/GenderOptions";
import { NameInput } from "./components/NameInput";
import { AudioSystem } from "./systems/AudioSystem";
import { InputSystem } from "./systems/InputSystem";
import { TextTyper } from "./systems/TextTyper";
import { DialogBox } from "./components/DialogBpx";
import { CodeRainBackground } from "./components/CodeRainBackground";

export class IntroScene extends Scene {
  private currentStep = 0;
  private playerGender: PlayerGender = "nonbinary";
  private playerName = "";
  private canContinue = false;
  private nameInputActive = false;

  // Systems
  private audio!: AudioSystem;
  private inputSystem!: InputSystem;
  private textTyper!: TextTyper;

  // Components
  private codeRainBackground!: CodeRainBackground;
  private dialogBox!: DialogBox;
  private characterWithAura!: CharacterWithAura;
  private faceFrame!: FaceFrame;
  private genderOptions!: GenderOptions;
  private nameInput: NameInput | null = null;

  // Game Objects
  private budaSprite!: Phaser.GameObjects.Sprite;
  private continuePrompt!: Phaser.GameObjects.Text;
  private genderTitleText!: Phaser.GameObjects.Text;

  constructor() {
    super("IntroScene");
  }

  create(): void {
    this.initializeSystems();
    this.initializeComponents();
    this.createBudaSprite();
    this.createContinuePrompt();
    this.startIntroduction();

    // Adiciona interação com o fundo (opcional)
    this.setupBackgroundInteraction();
  }

  private initializeSystems(): void {
    this.audio = new AudioSystem(this);
    this.audio.setup();

    this.inputSystem = new InputSystem(this);
    this.inputSystem.setup();

    this.textTyper = new TextTyper(this, this.audio);
  }

  private initializeComponents(): void {
    this.codeRainBackground = new CodeRainBackground(this);
    this.codeRainBackground.create();

    this.dialogBox = new DialogBox(this);

    this.characterWithAura = new CharacterWithAura(
      this,
      this.scale.width / 2 - 75,
      300
    );

    this.faceFrame = new FaceFrame(this);
  }

  private setupBackgroundInteraction(): void {
    // Efeito de onda quando o Buda fala
    this.budaSprite.on("animationstart", () => {
      this.codeRainBackground.createShockwave(
        this.budaSprite.x,
        this.budaSprite.y - 50
      );
    });

    // Efeito de trail quando o mouse se move (opcional)
    this.input.on(
      "pointermove",
      (pointer: Phaser.Input.Pointer) => {
        if (Math.random() < 0.3) {
          this.codeRainBackground.createTrail(
            pointer.x,
            pointer.y
          );
        }
      }
    );
  }

  private createBudaSprite(): void {
    const budaTexture = this.textures.exists("buda-idle")
      ? "buda-idle"
      : "bob-idle";

    this.budaSprite = this.add
      .sprite(100, this.scale.height - 100, budaTexture)
      .setScale(0.35)
      .setVisible(true);

    if (!this.anims.exists("buda-talk")) {
      this.anims.create({
        key: "buda-talk",
        frames: this.anims.generateFrameNumbers(
          budaTexture,
          {
            frames: [0, 1, 2, 1, 0, 3, 4, 3],
          }
        ),
        frameRate: 6,
        repeat: -1,
      });
    }
  }

  private createContinuePrompt(): void {
    this.continuePrompt = this.add
      .text(
        this.scale.width / 2,
        this.scale.height - 35,
        "[ ENTER para continuar ]",
        {
          ...INTRO_CONFIG.fonts.small,
          color: this.convertColorToString(
            INTRO_CONFIG.colors.highlight
          ),
          backgroundColor: "rgba(0, 0, 0, 0.7)",
          padding: { x: 20, y: 10 },
        }
      )
      .setOrigin(0.5)
      .setVisible(false)
      .setDepth(101);

    this.tweens.add({
      targets: this.continuePrompt,
      alpha: { from: 0.5, to: 1 },
      duration: 1000,
      yoyo: true,
      repeat: -1,
      paused: true,
    });
  }

  private startIntroduction(): void {
    this.currentStep = 0;
    this.time.delayedCall(1000, () => {
      this.showStep();
    });
  }

  private showStep(): void {
    this.canContinue = false;
    this.inputSystem.removeAllListeners();

    this.budaSprite.play("buda-talk");

    if (this.currentStep < INTRO_STEPS.length) {
      this.showText(INTRO_STEPS[this.currentStep].text);
    } else if (this.currentStep === 4) {
      const welcomeText = `Seja ${getWelcomePronoun(
        this.playerGender
      )}, ${
        this.playerName
      }!\nSeu crachá está pronto. Explore e descubra minha jornada!`;
      this.showText(welcomeText);
    } else if (this.currentStep === 5) {
      this.completeIntroduction();
    }
  }

  private showText(message: string): void {
    this.dialogBox.show();
    this.dialogBox.clearText();
    this.continuePrompt.setVisible(false);

    this.textTyper.typeText(
      this.dialogBox["textContent"], // Acessando membro privado via index
      message,
      () => this.setupContinuePrompt()
    );
  }

  private setupContinuePrompt(): void {
    this.canContinue = true;
    this.continuePrompt.setVisible(true);
    this.tweens.resumeAll();

    const advance = () => {
      if (this.canContinue && !this.textTyper.typing) {
        this.currentStep++;

        if (this.currentStep === 3) {
          this.showNameInput();
          return;
        }

        if (this.currentStep === 4) {
          this.showGenderSelection();
          return;
        }

        this.showStep();
      }
    };

    this.inputSystem.onContinue(advance);
  }

  private showNameInput(): void {
    this.continuePrompt.setVisible(false);
    this.canContinue = false;
    this.nameInputActive = true;

    this.nameInput = new NameInput(this, (name: string) => {
      this.playerName = name;
      this.audio.playConfirm();

      this.codeRainBackground.createMatrixEffect(
        this.scale.width / 2,
        320
      );

      this.createSparkleEffect(
        this.scale.width / 2,
        320,
        INTRO_CONFIG.colors.success
      );

      this.time.delayedCall(800, () => {
        this.nameInput?.destroy();
        this.nameInput = null;
        this.currentStep = 3;
        this.showStep();
      });
    });

    this.nameInput.create();
  }

  private showGenderSelection(): void {
    this.continuePrompt.setVisible(false);
    this.canContinue = false;

    // Cria o personagem com aura (posicionado à esquerda do quadro)
    this.characterWithAura.create("nonbinary");

    // Ajusta a posição do personagem para ficar à esquerda do quadro
    this.characterWithAura.container.setPosition(
      this.scale.width / 2 - 75, // 150px à esquerda do centro
      300
    );

    this.createGenderTitle();

    // Cria o quadro de rosto (no centro)
    this.faceFrame.create(
      "nonbinary",
      this.scale.width / 2,
      200
    );
    this.faceFrame.show("nonbinary");

    // Cria as opções de gênero
    this.genderOptions = new GenderOptions(
      this,
      (gender) => this.selectGender(gender),
      (gender) => this.onGenderHover(gender)
    );

    this.genderOptions.create();
  }

  private createGenderTitle(): void {
    this.genderTitleText = this.add
      .text(
        this.scale.width / 2,
        36, // Posicionado mais acima para não atrapalhar
        "SELECIONE SUA IDENTIDADE DE GÊNERO",
        {
          ...INTRO_CONFIG.fonts.dialog,
          fontSize: "32px", // Um pouco menor
          color: this.convertColorToString(
            INTRO_CONFIG.colors.highlight
          ),
          backgroundColor: "rgba(0, 0, 0, 0.7)",
          padding: { x: 20, y: 10 },
        }
      )
      .setOrigin(0.5)
      .setDepth(25); // Depth alto para ficar acima de tudo
  }

  private onGenderHover(gender: PlayerGender): void {
    // Atualiza o personagem com o gênero selecionado
    this.characterWithAura.updateGender(gender);

    // Atualiza o quadro de rosto
    this.faceFrame.show(gender);
    this.audio.playSelect();
  }

  private selectGender(gender: PlayerGender): void {
    this.audio.playConfirm();
    this.playerGender = gender;

    this.genderOptions.highlightSelected(gender);

    this.characterWithAura.updateGender(gender);

    this.registry.set("playerSprite", `${gender}-run`);
    this.registry.set("playerSpriteFace", `${gender}-face`);

    this.createSparkleEffect(
      this.characterWithAura.container.x,
      this.characterWithAura.container.y,
      INTRO_CONFIG.colors[gender]
    );

    this.time.delayedCall(1500, () => {
      this.genderTitleText.destroy();
      this.genderOptions.destroy();
      this.characterWithAura.fadeOut();
      this.faceFrame.createParticles(
        this.scale.width / 2,
        200,
        gender
      );

      this.currentStep = 4;
      this.showStep();
    });
  }

  private completeIntroduction(): void {
    this.registry.set("playerName", this.playerName);
    this.registry.set("playerGender", this.playerGender);
    this.registry.set("hasSeenIntro", true);
    this.registry.set(
      "playerSprite",
      `${this.playerGender}-run`
    );

    this.cleanup();

    // Efeito final no background
    this.codeRainBackground.createShockwave(
      this.scale.width / 2,
      this.scale.height / 2
    );

    this.cameras.main.fadeOut(2000, 0, 0, 0);

    this.tweens.add({
      targets: this.budaSprite,
      alpha: 0,
      duration: 1500,
    });

    this.audio.fadeOutMusic();

    this.cameras.main.once(
      Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,
      () => {
        this.scene.start("MainScene", {
          mapKey: "hub",
          spawnName: "spawn_start",
          facingDirection: "down",
        });
      }
    );
  }

  private cleanup(): void {
    this.inputSystem.removeAllListeners();
    this.audio.stopMusic();
    this.tweens.killAll();
    this.time.removeAllEvents();
  }

  private createSparkleEffect(
    x: number,
    y: number,
    color: number
  ): void {
    for (let i = 0; i < 10; i++) {
      const angle = Phaser.Math.Between(0, 360);
      const speed = 100;
      const distance = speed;

      const particle = this.add.graphics({ x, y });
      particle.fillStyle(color, 1);
      particle.fillCircle(0, 0, 2);

      this.tweens.add({
        targets: particle,
        x:
          x +
          Math.cos(Phaser.Math.DegToRad(angle)) * distance,
        y:
          y +
          Math.sin(Phaser.Math.DegToRad(angle)) * distance,
        alpha: 0,
        scale: 3,
        duration: 6000,
        onComplete: () => particle.destroy(),
      });
    }
  }

  private convertColorToString(color: number): string {
    return `#${color.toString(16).padStart(6, "0")}`;
  }
}
-e 

=== ./src/game/scenes/intro/components/Background.ts ===
import { Scene } from "phaser";
import { INTRO_CONFIG } from "../config/IntroConfig";

export class Background {
  private scene: Scene;

  constructor(scene: Scene) {
    this.scene = scene;
  }

  create(): void {
    this.createBackground();
    this.createCodeGrid();
  }

  private createBackground(): void {
    const bg = this.scene.add.graphics();
    bg.fillStyle(INTRO_CONFIG.colors.background, 1);
    bg.fillRect(
      0,
      0,
      this.scene.scale.width,
      this.scene.scale.height
    );
  }

  private createCodeGrid(): void {
    const codeChars = "01{}();:.=+-*/&|!?";

    for (let i = 0; i < 60; i++) {
      const x = Phaser.Math.Between(
        0,
        this.scene.scale.width
      );
      const y = Phaser.Math.Between(
        0,
        this.scene.scale.height
      );
      const char =
        codeChars[
          Math.floor(Math.random() * codeChars.length)
        ];

      this.scene.add.text(x, y, char, {
        fontFamily: "VT323",
        fontSize: "14px",
        color: this.convertColorToString(
          INTRO_CONFIG.colors.budaGlow
        ),
      });
    }
  }

  private convertColorToString(color: number): string {
    return `#${color.toString(16).padStart(6, "0")}`;
  }
}
-e 

=== ./src/game/scenes/intro/components/CodeRainBackground.ts ===
import { Scene } from "phaser";
import { INTRO_CONFIG } from "../config/IntroConfig";

interface CodeChar {
  text: Phaser.GameObjects.Text;
  speed: number;
  waveOffset: number;
  createdAt: number;
}

export class CodeRainBackground {
  private scene: Scene;
  private codeChars: CodeChar[] = [];
  private readonly CODE_CHARS = "01{}();:.=+-*/&|!?<>[]";
  private readonly MAX_CHARS = 100;
  private readonly COLUMNS = 20;
  private readonly ROWS = 30;
  private columnPositions: number[] = [];
  private waveTime = 0;

  constructor(scene: Scene) {
    this.scene = scene;
  }

  create(): void {
    this.setupColumnPositions();
    this.createInitialChars();
    this.startWaveAnimation();
  }

  private setupColumnPositions(): void {
    const columnWidth =
      this.scene.scale.width / this.COLUMNS;

    for (let i = 0; i < this.COLUMNS; i++) {
      this.columnPositions.push(
        i * columnWidth + columnWidth / 2
      );
    }
  }

  private createInitialChars(): void {
    for (let i = 0; i < this.MAX_CHARS; i++) {
      this.createCodeChar();
    }
  }

  private createCodeChar(): void {
    const columnIndex = Phaser.Math.Between(
      0,
      this.COLUMNS - 1
    );
    const x = this.columnPositions[columnIndex];
    const y = Phaser.Math.Between(-100, -50);

    const char =
      this.CODE_CHARS[
        Math.floor(Math.random() * this.CODE_CHARS.length)
      ];

    const text = this.scene.add
      .text(x, y, char, {
        fontFamily: "VT323",
        fontSize: this.getRandomSize(),
        color: this.getRandomColor(),
      })
      .setOrigin(0.5)
      .setAlpha(0.7 + Math.random() * 0.3);

    const speed = 30 + Math.random() * 70;
    const waveOffset = Math.random() * Math.PI * 2;

    this.codeChars.push({
      text,
      speed,
      waveOffset,
      createdAt: this.scene.time.now,
    });
  }

  private getRandomSize(): string {
    const sizes = ["12px", "14px", "16px", "18px", "20px"];
    return sizes[Math.floor(Math.random() * sizes.length)];
  }

  private getRandomColor(): string {
    const colors = [
      INTRO_CONFIG.colors.budaGlow,
      0x4cc9f0, // Azul claro
      0x2ecc71, // Verde
      0x9b59b6, // Roxo
      0xe74c3c, // Vermelho
      0xf1c40f, // Amarelo
      0x1abc9c, // Turquesa
    ];

    const color =
      colors[Math.floor(Math.random() * colors.length)];
    return `#${color.toString(16).padStart(6, "0")}`;
  }

  private startWaveAnimation(): void {
    this.scene.time.addEvent({
      delay: 16, // ≈60 FPS
      callback: this.update.bind(this),
      callbackScope: this,
      loop: true,
    });
  }

  private update(): void {
    this.waveTime += 0.05;

    // Atualiza cada caractere
    this.codeChars.forEach((codeChar, index) => {
      // Movimento para baixo
      codeChar.text.y += codeChar.speed / 60;

      // Efeito de onda lateral
      const waveAmount =
        Math.sin(this.waveTime + codeChar.waveOffset) * 10;
      codeChar.text.x =
        this.columnPositions[this.getColumnForChar(index)] +
        waveAmount;

      // Efeito de fade in/out
      const age = this.scene.time.now - codeChar.createdAt;
      const fadeInDuration = 500;

      if (age < fadeInDuration) {
        codeChar.text.alpha = (age / fadeInDuration) * 0.8;
      }

      // Efeito de piscar aleatório
      if (Math.random() < 0.01) {
        this.scene.tweens.add({
          targets: codeChar.text,
          alpha: { from: codeChar.text.alpha, to: 1 },
          duration: 100,
          yoyo: true,
          repeat: 1,
        });
      }

      // Remove caracteres que saíram da tela
      if (codeChar.text.y > this.scene.scale.height + 50) {
        this.recycleChar(index);
      }
    });

    // Adiciona novos caracteres ocasionalmente
    if (
      this.codeChars.length < this.MAX_CHARS &&
      Math.random() < 0.3
    ) {
      this.createCodeChar();
    }
  }

  private getColumnForChar(index: number): number {
    return index % this.COLUMNS;
  }

  private recycleChar(index: number): void {
    const codeChar = this.codeChars[index];

    // Reutiliza o mesmo objeto de texto
    codeChar.text.y = Phaser.Math.Between(-100, -50);
    codeChar.text.x =
      this.columnPositions[this.getColumnForChar(index)];
    codeChar.text.setText(
      this.CODE_CHARS[
        Math.floor(Math.random() * this.CODE_CHARS.length)
      ]
    );
    codeChar.text.setColor(this.getRandomColor());
    codeChar.text.setFontSize(this.getRandomSize());
    codeChar.createdAt = this.scene.time.now;
    codeChar.speed = 30 + Math.random() * 70;

    // Efeito de brilho ao reaparecer
    this.scene.tweens.add({
      targets: codeChar.text,
      alpha: { from: 0, to: 0.8 },
      duration: 300,
    });
  }

  // Método para criar efeito especial (pode ser chamado em eventos)
  createMatrixEffect(x: number, y: number): void {
    for (let i = 0; i < 20; i++) {
      this.scene.time.delayedCall(i * 50, () => {
        this.createExplosionEffect(x, y);
      });
    }
  }

  private createExplosionEffect(
    x: number,
    y: number
  ): void {
    for (let i = 0; i < 8; i++) {
      const angle = (i / 8) * Math.PI * 2;
      const distance = 50 + Math.random() * 100;

      const char =
        this.CODE_CHARS[
          Math.floor(Math.random() * this.CODE_CHARS.length)
        ];

      const text = this.scene.add
        .text(x, y, char, {
          fontFamily: "VT323",
          fontSize: "18px",
          color: this.getRandomColor(),
        })
        .setOrigin(0.5)
        .setAlpha(1);

      this.scene.tweens.add({
        targets: text,
        x: x + Math.cos(angle) * distance,
        y: y + Math.sin(angle) * distance,
        alpha: 0,
        scale: 2,
        duration: 1000,
        ease: "Power2",
        onComplete: () => text.destroy(),
      });
    }
  }

  // Método para criar trail de um caractere (para quando o mouse se move)
  createTrail(x: number, y: number): void {
    const char =
      this.CODE_CHARS[
        Math.floor(Math.random() * this.CODE_CHARS.length)
      ];

    const text = this.scene.add
      .text(x, y, char, {
        fontFamily: "VT323",
        fontSize: "14px",
        color: this.getRandomColor(),
      })
      .setOrigin(0.5)
      .setAlpha(0.8);

    this.scene.tweens.add({
      targets: text,
      alpha: 0,
      y: y - 20,
      scale: 1.5,
      duration: 800,
      ease: "Sine.easeOut",
      onComplete: () => text.destroy(),
    });
  }

  // Método para criar onda de choque (para quando algo importante acontece)
  createShockwave(x: number, y: number): void {
    const wave = this.scene.add.graphics();
    wave.fillStyle(INTRO_CONFIG.colors.budaGlow, 0.3);
    wave.fillCircle(0, 0, 10);

    this.scene.tweens.add({
      targets: wave,
      scale: 30,
      alpha: 0,
      duration: 1000,
      ease: "Power2",
      onComplete: () => wave.destroy(),
    });

    wave.setPosition(x, y);
  }

  destroy(): void {
    this.codeChars.forEach((codeChar) =>
      codeChar.text.destroy()
    );
    this.codeChars = [];
  }
}
-e 

=== ./src/game/scenes/intro/components/NameInput.ts ===
import { Scene } from "phaser";
import { INTRO_CONFIG } from "../config/IntroConfig";

export class NameInput {
  private scene: Scene;
  private container: Phaser.GameObjects.Container;
  private inputText: Phaser.GameObjects.Text;
  private cursor: Phaser.GameObjects.Text;
  private errorMsg: Phaser.GameObjects.Text;
  private cursorTween: Phaser.Tweens.Tween;
  private onComplete: (name: string) => void;

  constructor(
    scene: Scene,
    onComplete: (name: string) => void
  ) {
    this.scene = scene;
    this.onComplete = onComplete;
    this.container = this.scene.add.container(
      this.scene.scale.width / 2,
      320
    );
  }

  create(): void {
    const bg = this.scene.add.graphics();
    bg.fillStyle(0x000000, 0.7);
    bg.fillRoundedRect(-200, -35, 400, 70, 15);
    bg.lineStyle(3, INTRO_CONFIG.colors.highlight, 0.8);
    bg.strokeRoundedRect(-200, -35, 400, 70, 15);

    this.inputText = this.scene.add.text(
      -190,
      -20,
      "DIGITE SEU NOME",
      {
        ...INTRO_CONFIG.fonts.input,
        color: "#888888",
      }
    );

    this.cursor = this.scene.add
      .text(-190, -20, "█", {
        ...INTRO_CONFIG.fonts.input,
        color: this.convertColorToString(
          INTRO_CONFIG.colors.highlight
        ),
      })
      .setVisible(false);

    const instruction = this.scene.add
      .text(
        0,
        60,
        "(Mínimo 2 letras • Enter para confirmar)",
        {
          ...INTRO_CONFIG.fonts.small,
          color: "#aaaaaa",
        }
      )
      .setOrigin(0.5);

    this.errorMsg = this.scene.add
      .text(0, 100, "Digite pelo menos 2 caracteres!", {
        ...INTRO_CONFIG.fonts.small,
        color: this.convertColorToString(
          INTRO_CONFIG.colors.error
        ),
      })
      .setOrigin(0.5)
      .setVisible(false);

    this.container.add([
      bg,
      this.inputText,
      this.cursor,
      instruction,
      this.errorMsg,
    ]);

    this.setupCursorAnimation();
    this.setupInputHandling();
  }

  private setupCursorAnimation(): void {
    this.cursorTween = this.scene.tweens.add({
      targets: this.cursor,
      alpha: { from: 0, to: 1 },
      duration: 600,
      yoyo: true,
      repeat: -1,
    });
  }

  private setupInputHandling(): void {
    let name = "";

    const updateDisplay = () => {
      if (name.length === 0) {
        this.inputText
          .setText("DIGITE SEU NOME")
          .setColor("#888888");
        this.cursor.setVisible(false);
        this.cursorTween.pause();
      } else {
        this.inputText
          .setText(name.toUpperCase())
          .setColor("#ffffff");
        this.cursor.x = -190 + this.inputText.width + 2;
        this.cursor.setVisible(true);
        this.cursorTween.resume();
        this.errorMsg.setVisible(false);
      }
    };

    const handleInputKey = (event: KeyboardEvent) => {
      if (event.key === "Enter") {
        if (name.length < 2) {
          this.showError();
          return;
        }

        this.scene.input.keyboard?.off(
          "keydown",
          handleInputKey
        );
        this.onComplete(name.toUpperCase());
      } else if (event.key === "Backspace") {
        name = name.slice(0, -1);
        updateDisplay();
      } else if (
        event.key.length === 1 &&
        name.length < 15
      ) {
        if (/^[a-zA-ZÀ-ÿ\s'-]$/.test(event.key)) {
          name += event.key;
          updateDisplay();
        }
      }
    };

    this.scene.input.keyboard?.on(
      "keydown",
      handleInputKey
    );
    updateDisplay();
  }

  private showError(): void {
    this.errorMsg.setVisible(true);

    this.scene.tweens.add({
      targets: this.container,
      x: {
        from: this.container.x - 5,
        to: this.container.x + 5,
      },
      duration: 50,
      yoyo: true,
      repeat: 5,
      onComplete: () =>
        this.container.setX(this.scene.scale.width / 2),
    });
  }

  destroy(): void {
    this.cursorTween.stop();
    this.container.destroy();
    this.scene.input.keyboard?.removeAllListeners(
      "keydown"
    );
  }

  private convertColorToString(color: number): string {
    return `#${color.toString(16).padStart(6, "0")}`;
  }
}
-e 

=== ./src/game/scenes/intro/components/DialogBpx.ts ===
import { Scene } from "phaser";
import { INTRO_CONFIG } from "../config/IntroConfig";

export class DialogBox {
  private scene: Scene;
  private container: Phaser.GameObjects.Container;
  private textContent: Phaser.GameObjects.Text;

  constructor(scene: Scene) {
    this.scene = scene;
    this.container = this.scene.add
      .container(0, 0)
      .setDepth(100);
    this.textContent = this.scene.add.text(0, 0, "", {
      ...INTRO_CONFIG.fonts.dialog,
      color: "#ffffff",
      wordWrap: { width: 550 },
      lineSpacing: 12,
    });

    this.createBox();
  }

  private createBox(): void {
    const width = 600;
    const height = 150;
    const x = this.scene.scale.width / 2;
    const y = this.scene.scale.height - height / 2 - 15;

    this.container.setPosition(x, y);

    const shadow = this.scene.add.graphics();
    shadow.fillStyle(0x000000, 0.6);
    shadow.fillRoundedRect(
      -width / 2 + 4,
      -height / 2 + 4,
      width,
      height,
      12
    );

    const bg = this.scene.add.graphics();
    bg.fillStyle(INTRO_CONFIG.colors.textBox, 0.9);
    bg.fillRoundedRect(
      -width / 2,
      -height / 2,
      width,
      height,
      12
    );
    bg.lineStyle(3, INTRO_CONFIG.colors.highlight, 0.9);
    bg.strokeRoundedRect(
      -width / 2,
      -height / 2,
      width,
      height,
      12
    );

    this.textContent.setPosition(
      -width / 2 + 25,
      -height / 2 + 40
    );

    this.container.add([shadow, bg, this.textContent]);
    this.container.setVisible(false);
  }

  show(): void {
    this.container.setVisible(true);
  }

  hide(): void {
    this.container.setVisible(false);
  }

  setText(text: string): void {
    this.textContent.setText(text);
  }

  clearText(): void {
    this.textContent.setText("");
  }

  get isVisible(): boolean {
    return this.container.visible;
  }
}
-e 

=== ./src/game/scenes/intro/components/CharacterWithAura.ts ===
import { Scene } from "phaser";
import { PlayerGender } from "../types/IntroTypes";

export class CharacterWithAura {
  private scene: Scene;
  public container: Phaser.GameObjects.Container;
  public characterSprite: Phaser.GameObjects.Sprite;
  private auraSprites: Phaser.GameObjects.Sprite[] = [];

  constructor(scene: Scene, x: number, y: number) {
    this.scene = scene;
    this.container = this.scene.add
      .container(x, y)
      .setDepth(20); // Aumentado depth para ficar na frente
    this.characterSprite = this.scene.add
      .sprite(0, 0, "nonbinary-run")
      .setVisible(false);
  }

  create(gender: PlayerGender = "nonbinary"): void {
    this.destroyAuras();
    this.createCharacter(gender);
    this.setupAnimations(gender);
    this.animateAuras();
  }

  private destroyAuras(): void {
    this.auraSprites.forEach((sprite) => sprite.destroy());
    this.auraSprites = [];
  }

  private createCharacter(gender: PlayerGender): void {
    const spriteKey = `${gender}-run`;

    // Aura externa (mais atrás)
    const outerAura = this.scene.add
      .sprite(0, 0, spriteKey)
      .setScale(5)
      .setTint(0xffffff)
      .setAlpha(1);

    // Aura interna (no meio)
    const innerAura = this.scene.add
      .sprite(0, 0, spriteKey)
      .setScale(4)
      .setTint(0xffffff)
      .setAlpha(1);

    // Personagem principal (na frente)
    this.characterSprite
      .setTexture(spriteKey)
      .setScale(3.5)
      .setAlpha(1)
      .setVisible(true);

    // Limpa container e adiciona na ordem correta
    this.container.removeAll(true);
    this.container.add([
      outerAura,
      innerAura,
      this.characterSprite,
    ]);
    this.auraSprites = [outerAura, innerAura];
  }

  private setupAnimations(gender: PlayerGender): void {
    const animationKey = `${gender}-running-down`;

    // Cria animação se não existir
    if (!this.scene.anims.exists(animationKey)) {
      this.createIdleDownAnimation(
        `${gender}-run`,
        animationKey
      );
    }

    // Aplica animação a todos os sprites
    this.container.each(
      (child: Phaser.GameObjects.GameObject) => {
        if (child instanceof Phaser.GameObjects.Sprite) {
          child.play(animationKey, true);
        }
      }
    );
  }

  private animateAuras(): void {
    if (this.auraSprites.length < 2) return;

    const [outerAura, innerAura] = this.auraSprites;

    this.scene.tweens.add({
      targets: outerAura,
      alpha: { from: 0.1, to: 0.2 },
      scale: { from: 3.75, to: 3.85 },
      duration: 2000,
      yoyo: true,
      repeat: -1,
      ease: "Sine.easeInOut",
    });

    this.scene.tweens.add({
      targets: innerAura,
      alpha: { from: 0.2, to: 0.3 },
      scale: { from: 3.6, to: 3.7 },
      duration: 2000,
      yoyo: true,
      repeat: -1,
      ease: "Sine.easeInOut",
      delay: 500,
    });
  }

  updateGender(gender: PlayerGender): void {
    const spriteKey = `${gender}-run`;

    // Atualiza texturas
    this.container.each(
      (child: Phaser.GameObjects.GameObject) => {
        if (child instanceof Phaser.GameObjects.Sprite) {
          child.setTexture(spriteKey);
        }
      }
    );

    // Atualiza animação
    this.setupAnimations(gender);
  }

  fadeOut(): void {
    this.scene.tweens.add({
      targets: this.container,
      alpha: 0,
      duration: 500,
    });
  }

  destroy(): void {
    this.container.destroy();
    this.auraSprites.forEach((sprite) => sprite.destroy());
    this.auraSprites = [];
  }

  get sprite(): Phaser.GameObjects.Sprite {
    return this.characterSprite;
  }

  private createIdleDownAnimation(
    textureKey: string,
    animationKey: string
  ): void {
    this.scene.anims.create({
      key: animationKey,
      frames: this.scene.anims.generateFrameNumbers(
        textureKey,
        {
          start: 6,
          end: 8,
        }
      ),
      frameRate: 6,
      repeat: -1,
    });
  }
}
-e 

=== ./src/game/scenes/intro/components/GenderOptions.ts ===
import { Scene } from "phaser";
import {
  PlayerGender,
  GenderOption,
} from "../types/IntroTypes";
import { INTRO_CONFIG } from "../config/IntroConfig";

interface OptionContainerData {
  card: Phaser.GameObjects.Graphics;
  label: Phaser.GameObjects.Text;
  icon: Phaser.GameObjects.Text;
  color: number;
  key: PlayerGender;
}

export class GenderOptions {
  private scene: Scene;
  private options: Phaser.GameObjects.Container[] = [];
  private optionData: Map<
    Phaser.GameObjects.Container,
    OptionContainerData
  > = new Map();
  private onSelect: (gender: PlayerGender) => void;
  private onHover: (gender: PlayerGender) => void;

  constructor(
    scene: Scene,
    onSelect: (gender: PlayerGender) => void,
    onHover: (gender: PlayerGender) => void
  ) {
    this.scene = scene;
    this.onSelect = onSelect;
    this.onHover = onHover;
  }

  create(): void {
    const genderOptions: GenderOption[] = [
      {
        key: "nonbinary",
        label: "NÃO-BINÁRIO",
        color: INTRO_CONFIG.colors.nonbinary,
        icon: "⚧",
        sprite: "nonbinary-run",
        face: "nonbinary-face",
        animation: "nonbinary-running-down",
      },
      {
        key: "female",
        label: "FEMININO",
        color: INTRO_CONFIG.colors.female,
        icon: "♀",
        sprite: "female-run",
        face: "female-face",
        animation: "female-running-down",
      },
      {
        key: "male",
        label: "MASCULINO",
        color: INTRO_CONFIG.colors.male,
        icon: "♂",
        sprite: "male-run",
        face: "male-face",
        animation: "male-running-down",
      },
    ];

    const startX = this.scene.scale.width / 2 - 200;
    const spacing = 200;

    genderOptions.forEach((option, index) => {
      const x = startX + spacing * index;
      const y = 420;

      const container = this.createOptionCard(x, y, option);
      this.options.push(container);
    });
  }

  private createOptionCard(
    x: number,
    y: number,
    option: GenderOption
  ): Phaser.GameObjects.Container {
    const container = this.scene.add.container(x, y);

    // Cria o card (retângulo)
    const card = this.scene.add.graphics();
    card.fillStyle(option.color, 1);
    card.fillRoundedRect(-80, -70, 160, 140, 10);
    card.lineStyle(3, option.color, 0.8);
    card.strokeRoundedRect(-80, -70, 160, 140, 10);

    // Cria o ícone
    const icon = this.scene.add
      .text(0, -35, option.icon, {
        fontFamily: "VT323",
        fontSize: "56px",
        color: "#ffffff",
      })
      .setOrigin(0.5);

    // Cria o label
    const label = this.scene.add
      .text(0, 20, option.label, {
        ...INTRO_CONFIG.fonts.dialog,
        fontSize: "20px",
        color: "#ffffff",
        align: "center",
        wordWrap: { width: 140 },
      })
      .setOrigin(0.5);

    // Adiciona elementos ao container
    container.add([card, icon, label]);

    // Armazena os dados em um Map para fácil acesso
    this.optionData.set(container, {
      card,
      label,
      icon,
      color: option.color,
      key: option.key,
    });

    // Configura interatividade
    this.setupInteractivity(container, card, y, option.key);

    return container;
  }

  private setupInteractivity(
    container: Phaser.GameObjects.Container,
    card: Phaser.GameObjects.Graphics,
    originalY: number,
    genderKey: PlayerGender
  ): void {
    card.setInteractive(
      new Phaser.Geom.Rectangle(-80, -70, 160, 140),
      Phaser.Geom.Rectangle.Contains
    );

    card.on("pointerover", () => {
      this.onHover(genderKey);

      this.scene.tweens.add({
        targets: container,
        y: originalY - 10,
        duration: 200,
        ease: "Sine.easeOut",
      });
    });

    card.on("pointerout", () => {
      this.scene.tweens.add({
        targets: container,
        y: originalY,
        duration: 200,
        ease: "Sine.easeOut",
      });
    });

    card.on("pointerdown", () => {
      this.onSelect(genderKey);
    });
  }

  highlightSelected(selectedGender: PlayerGender): void {
    this.options.forEach((container) => {
      const data = this.optionData.get(container);
      if (!data) return;

      const { card, label, icon, color, key } = data;
      const isSelected = key === selectedGender;

      card.clear();

      if (isSelected) {
        // Card selecionado - mais brilhante
        card.fillStyle(color, 0.4);
        card.fillRoundedRect(-80, -70, 160, 140, 10);
        card.lineStyle(4, 0xffffff, 1);
        card.strokeRoundedRect(-80, -70, 160, 140, 10);

        label.setColor("#ffffff");
        icon.setColor("#ffffff");

        // Efeito de seleção
        this.scene.tweens.add({
          targets: container,
          scale: { from: 1, to: 1.1 },
          duration: 200,
          yoyo: true,
        });
      } else {
        // Card não selecionado - mais escuro
        card.fillStyle(color, 0.1);
        card.fillRoundedRect(-80, -70, 160, 140, 10);
        card.lineStyle(2, 0x666666, 0.5);
        card.strokeRoundedRect(-80, -70, 160, 140, 10);

        label.setColor("#666666");
        icon.setColor("#666666");
      }
    });
  }

  destroy(): void {
    this.options.forEach((container) =>
      container.destroy()
    );
    this.options = [];
    this.optionData.clear();
  }
}
-e 

=== ./src/game/scenes/intro/components/FaceFrame.ts ===
import { Scene } from "phaser";
import { PlayerGender } from "../types/IntroTypes";
import { INTRO_CONFIG } from "../config/IntroConfig";

export class FaceFrame {
  private scene: Scene;
  private frames: Map<
    string,
    Phaser.GameObjects.Container
  > = new Map();
  private currentFrame: Phaser.GameObjects.Container | null =
    null;

  constructor(scene: Scene) {
    this.scene = scene;
  }

  create(gender: PlayerGender, x: number, y: number): void {
    const container = this.scene.add
      .container(x, y)
      .setDepth(5); // Depth menor que o personagem (20)
    const frameWidth = 250;
    const frameHeight = 250;

    this.addFace(container, gender);
    this.addFrame(
      container,
      gender,
      frameWidth,
      frameHeight
    );

    container.setAlpha(0);
    this.frames.set(gender, container);
    this.currentFrame = container;
  }

  private addFace(
    container: Phaser.GameObjects.Container,
    gender: PlayerGender
  ): void {
    const faceTexture = `${gender}-face`;

    if (this.scene.textures.exists(faceTexture)) {
      const faceSprite = this.scene.add
        .sprite(0, 0, faceTexture)
        .setDisplaySize(200, 200)
        .setAlpha(1)
        .setDepth(0);
      container.add(faceSprite);
    } else {
      const symbol =
        gender === "male"
          ? "♂"
          : gender === "female"
          ? "♀"
          : "⚧";
      const symbolText = this.scene.add
        .text(0, 0, symbol, {
          fontFamily: "VT323",
          fontSize: "100px",
          color: this.convertColorToString(
            INTRO_CONFIG.colors[gender]
          ),
        })
        .setOrigin(0.5)
        .setAlpha(1)
        .setDepth(0);
      container.add(symbolText);
    }
  }

  private addFrame(
    container: Phaser.GameObjects.Container,
    gender: PlayerGender,
    width: number,
    height: number
  ): void {
    if (this.scene.textures.exists("frame-gold")) {
      const frameImage = this.scene.add
        .image(0, 0, "frame-gold")
        .setDisplaySize(width, height)
        .setAlpha(1)
        .setDepth(1);
      container.add(frameImage);
    } else {
      const frameBg = this.scene.add.graphics();
      const color = INTRO_CONFIG.colors[gender];

      frameBg.fillStyle(0x000000, 0.3);
      frameBg.fillRoundedRect(
        -width / 2,
        -height / 2,
        width,
        height,
        20
      );

      frameBg.lineStyle(8, color, 1);
      frameBg.strokeRoundedRect(
        -width / 2,
        -height / 2,
        width,
        height,
        20
      );

      frameBg.lineStyle(4, 0xffd700, 0.8);
      frameBg.strokeRoundedRect(
        -width / 2 + 5,
        -height / 2 + 5,
        width - 10,
        height - 10,
        15
      );

      frameBg.setDepth(1);
      container.add(frameBg);
    }
  }

  show(gender: PlayerGender): void {
    if (this.currentFrame) {
      this.hideCurrent();
    }

    let frame = this.frames.get(gender);

    if (!frame) {
      this.create(gender, this.scene.scale.width / 2, 200);
      frame = this.frames.get(gender)!;
    }

    frame.setAlpha(0).setScale(0.8);

    this.scene.tweens.add({
      targets: frame,
      alpha: 1,
      scale: 1,
      duration: 400,
      ease: "Back.easeOut",
    });

    this.currentFrame = frame;
  }

  private hideCurrent(): void {
    if (this.currentFrame) {
      this.scene.tweens.add({
        targets: this.currentFrame,
        alpha: 0,
        scale: 0.8,
        duration: 300,
        ease: "Sine.easeOut",
      });
    }
  }

  createParticles(
    x: number,
    y: number,
    gender: PlayerGender
  ): void {
    const color = INTRO_CONFIG.colors[gender];

    for (let i = 0; i < 15; i++) {
      const angle = Phaser.Math.Between(0, 360);
      const distance = Phaser.Math.Between(80, 120);

      const particle = this.scene.add.graphics({ x, y });
      particle.fillStyle(color, 0.8);
      particle.fillCircle(0, 0, Phaser.Math.Between(2, 4));

      this.scene.tweens.add({
        targets: particle,
        x:
          x +
          Math.cos(Phaser.Math.DegToRad(angle)) * distance,
        y:
          y +
          Math.sin(Phaser.Math.DegToRad(angle)) * distance,
        alpha: 0,
        scale: 0,
        duration: 800,
        ease: "Cubic.easeOut",
        onComplete: () => particle.destroy(),
      });
    }
  }

  private convertColorToString(color: number): string {
    return `#${color.toString(16).padStart(6, "0")}`;
  }
}
-e 

=== ./src/game/scenes/intro/config/IntroConfig.ts ===
import { IntroConfig } from "../types/IntroTypes";

export const INTRO_CONFIG: IntroConfig = {
  colors: {
    background: 0x333333,
    textBox: 0x000000,
    text: 0xffffff,
    highlight: 0xffffff,
    budaGlow: 0x4cc9f0,
    male: 0x4a90e2,
    female: 0xe24a8e,
    nonbinary: 0x9b59b6,
    error: 0xff6b6b,
    success: 0x51cf66,
  },
  fonts: {
    title: {
      fontFamily: '"VT323"',
      fontSize: "36px",
    },
    dialog: {
      fontFamily: '"VT323"',
      fontSize: "24px",
    },
    input: {
      fontFamily: '"VT323"',
      fontSize: "24px",
    },
    small: {
      fontFamily: '"VT323"',
      fontSize: "16px",
    },
  },
};
-e 

=== ./src/game/scenes/intro/config/IntroSteps.ts ===
import { IntroStep } from "../types/IntroTypes";

export const INTRO_STEPS: IntroStep[] = [
  {
    id: 0,
    text: "Olá! Eu sou o Buda.\nEngenheiro Front-End e criador deste mundo.",
  },
  {
    id: 1,
    text: "Nele, cada prédio é uma parte da minha vida, cada interação um ponto a ser conhecido...",
  },
  {
    id: 2,
    text: "Antes de começarmos nossa jornada,\ncomo você prefere ser chamado?",
  },
  {
    id: 3,
    text: "Perfeito! E como você se identifica?",
  },
];

export const getWelcomePronoun = (
  gender: "male" | "female" | "nonbinary"
) => {
  switch (gender) {
    case "male":
      return "bem-vindo";
    case "female":
      return "bem-vinda";
    case "nonbinary":
      return "bem-vinde";
  }
};
-e 

=== ./src/game/scenes/intro/types/IntroTypes.ts ===
export type PlayerGender = "male" | "female" | "nonbinary";

export interface IntroStep {
  id: number;
  text: string;
  action?: () => void;
}

export interface GenderOption {
  key: PlayerGender;
  label: string;
  color: number;
  icon: string;
  sprite: string;
  face: string;
  animation: string;
}

export interface IntroConfig {
  colors: {
    background: number;
    textBox: number;
    text: number;
    highlight: number;
    budaGlow: number;
    male: number;
    female: number;
    nonbinary: number;
    error: number;
    success: number;
  };
  fonts: {
    title: {
      fontFamily: string;
      fontSize: string;
    };
    dialog: {
      fontFamily: string;
      fontSize: string;
    };
    input: {
      fontFamily: string;
      fontSize: string;
    };
    small: {
      fontFamily: string;
      fontSize: string;
    };
  };
}
-e 

=== ./src/game/scenes/intro/systems/TextTyper.ts ===
import { Scene } from "phaser";
import { AudioSystem } from "./AudioSystem";

export class TextTyper {
  private scene: Scene;
  private audio: AudioSystem;
  private isTyping = false;

  constructor(scene: Scene, audio: AudioSystem) {
    this.scene = scene;
    this.audio = audio;
  }

  typeText(
    textObject: Phaser.GameObjects.Text,
    message: string,
    onComplete: () => void,
    speed: number = 30
  ): void {
    this.isTyping = true;
    textObject.setText("");

    let charIndex = 0;
    let lastSoundTime = 0;
    const soundCooldown = 40;

    const timer = this.scene.time.addEvent({
      delay: speed,
      callback: () => {
        textObject.setText(message.substring(0, charIndex));
        charIndex++;

        const now = this.scene.time.now;
        if (now - lastSoundTime > soundCooldown) {
          this.audio.playTypeSound();
          lastSoundTime = now;
        }

        if (charIndex > message.length) {
          timer.remove();
          this.isTyping = false;
          onComplete();
        }
      },
      callbackScope: this,
      repeat: message.length,
    });
  }

  get typing(): boolean {
    return this.isTyping;
  }
}
-e 

=== ./src/game/scenes/intro/systems/InputSystem.ts ===
import { Scene } from "phaser";

export class InputSystem {
  private scene: Scene;
  private continueKey!: Phaser.Input.Keyboard.Key;

  constructor(scene: Scene) {
    this.scene = scene;
  }

  setup(): void {
    if (this.scene.input.keyboard) {
      this.continueKey = this.scene.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.ENTER
      );
      this.scene.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.SPACE
      );
    }
  }

  onContinue(callback: () => void): void {
    this.continueKey?.removeAllListeners();
    this.continueKey?.on("down", callback);
    this.scene.input.on("pointerdown", callback);
  }

  removeAllListeners(): void {
    this.continueKey?.removeAllListeners();
    this.scene.input.keyboard?.removeAllListeners();
    this.scene.input.off("pointerdown");
  }
}
-e 

=== ./src/game/scenes/intro/systems/AudioSystem.ts ===
import { Scene } from "phaser";

export class AudioSystem {
  private scene: Scene;
  private typeSounds: Phaser.Sound.BaseSound[] = [];
  private selectSound!: Phaser.Sound.BaseSound;
  private confirmSound!: Phaser.Sound.BaseSound;
  private errorSound!: Phaser.Sound.BaseSound;
  private bgMusic!: Phaser.Sound.BaseSound;

  constructor(scene: Scene) {
    this.scene = scene;
  }

  setup(): void {
    this.typeSounds = [
      this.scene.sound.add("type_1", { volume: 0.1 }),
      this.scene.sound.add("type_2", { volume: 0.5 }),
      this.scene.sound.add("type_3", { volume: 0.2 }),
    ];

    this.selectSound = this.scene.sound.add("snd_select", {
      volume: 0.4,
    });
    this.confirmSound = this.scene.sound.add(
      "snd_confirm",
      { volume: 0.5 }
    );
    this.errorSound = this.scene.sound.add("snd_error", {
      volume: 0.5,
    });
    this.bgMusic = this.scene.sound.add("intro_music", {
      volume: 0.08,
      loop: true,
    });

    if (!this.scene.sound.locked) {
      this.bgMusic.play();
    }
  }

  playTypeSound(): void {
    if (this.typeSounds.length === 0) return;

    const randomSound =
      this.typeSounds[
        Math.floor(Math.random() * this.typeSounds.length)
      ];
    randomSound.play({
      rate: 0.85 + Math.random() * 0.3,
      volume: 0.05,
      detune: Math.random() * 200 - 100,
    });
  }

  playSelect(): void {
    this.selectSound.play({ volume: 0.2 });
  }

  playConfirm(): void {
    this.confirmSound.play({ rate: 1.2, volume: 0.3 });
  }

  playError(): void {
    this.errorSound.play();
  }

  fadeOutMusic(duration: number = 1500): void {
    if (this.bgMusic && this.bgMusic.isPlaying) {
      this.scene.tweens.add({
        targets: this.bgMusic,
        volume: 0,
        duration: duration,
        onComplete: () => this.bgMusic.stop(),
      });
    }
  }

  stopMusic(): void {
    if (this.bgMusic && this.bgMusic.isPlaying) {
      this.bgMusic.stop();
    }
  }
}
-e 

=== ./src/game/scenes/NameInputScene.ts ===
import { Scene } from "phaser";

export class NameInputScene extends Scene {
  constructor() {
    super("NameInputScene");
  }

  create() {
    // 1. Fundo simples
    this.cameras.main.setBackgroundColor("#2d2d2d");

    // 2. Texto de instrução
    this.add
      .text(
        this.scale.width / 2,
        this.scale.height / 2 - 150,
        "IDENTIFICAÇÃO",
        {
          fontSize: "64px",
          color: "#ffffff",
          fontFamily: "VT323, monospace",
          fontStyle: "normal",
        }
      )
      .setOrigin(0.5);

    this.add
      .text(
        this.scale.width / 2,
        this.scale.height / 2 - 100,
        "Digite seu nome para o crachá:",
        {
          fontSize: "32px",
          color: "#aaaaaa",
          fontFamily: "VT323, monospace",
          fontStyle: "normal",
        }
      )
      .setOrigin(0.5);

    // 3. Cria o Elemento HTML de Input
    // O estilo CSS é inline para facilitar, mas poderia ser uma classe
    const element = this.add.dom(
      this.scale.width / 2,
      this.scale.height / 2
    ).createFromHTML(`
      <div style="display: flex; flex-direction: column; align-items: center;">
        <input type="text" name="nameField" style="text-transform: uppercase; font-family: VT323, monospace; font-style: normal; font-size: 30px; padding: 10px; width: 200px; text-align: center; border-radius: 5px; border: none;">
        <button name="playButton" style="margin-top: 20px; font-size: 20px; padding: 10px 30px; cursor: pointer; background-color: #4a90e2; color: white; border: none; border-radius: 5px;">ENTRAR</button>
      </div>
    `);

    // 4. Adiciona o Listener para o botão e ENTER
    element.addListener("click");
    element.on("click", (event: any) => {
      if (event.target.name === "playButton") {
        this.handleLogin(element);
      }
    });

    // Opcional: Aceitar tecla Enter
    this.input.keyboard?.on("keydown-ENTER", () => {
      this.handleLogin(element);
    });
  }

  private handleLogin(
    element: Phaser.GameObjects.DOMElement
  ) {
    const input = element.getChildByName(
      "nameField"
    ) as HTMLInputElement;

    // Se não digitar nada, usa um padrão
    const name = input.value.trim() || "Bob";

    // --- O PULO DO GATO ---
    // Salvamos no REGISTRY (memória global do Phaser)
    this.registry.set("playerName", name.toUpperCase());

    // Inicia o jogo
    this.scene.start("MainScene", {
      mapKey: "hub", // Nome do JSON carregado na BootScene
      spawnName: "spawn_start", // Ponto onde o player nasce lá dentro
      facingDirection: "down",
    }); // Ou MainScene, dependendo de onde começa seu jogo
  }
}
-e 

=== ./src/game/scenes/MainScene.ts ===
import { Scene } from "phaser";
import { UIScene } from "./UiScene";
import { Player } from "../../entities/Player";
import { MapManager } from "../../systems/MapManager";

export class MainScene extends Scene {
  private player!: Player;
  private mapManager!: MapManager;
  private uiScene!: UIScene;

  private keyE!: Phaser.Input.Keyboard.Key;
  private keyY!: Phaser.Input.Keyboard.Key;
  private keyN!: Phaser.Input.Keyboard.Key;

  private coinSound!: Phaser.Sound.BaseSound;
  private waterDropSound!: Phaser.Sound.BaseSound;
  private doorOpenSound!: Phaser.Sound.BaseSound;

  private itemsZone!: Phaser.Physics.Arcade.StaticGroup;
  private currentInteractiveObject: Phaser.GameObjects.Zone | null =
    null;
  private interactionPrompt!: Phaser.GameObjects.Sprite;

  private isReading: boolean = false;
  private isQuestionMode: boolean = false;
  private targetSpawn: string = "spawn_start";
  private facingDirection:
    | "up"
    | "down"
    | "right"
    | "left" = "down";
  private isIntro: boolean = false;

  private refuseCount: number = 0;
  private isPlayerReady: boolean = false;

  constructor() {
    super("MainScene");
  }

  init(data: {
    spawnName?: string;
    facingDirection?: "up" | "down" | "right" | "left";
  }) {
    this.targetSpawn = data.spawnName || "spawn_start";
    this.facingDirection = data.facingDirection || "down";
  }

  create() {
    console.log("MainScene.create() iniciando...");

    this.mapManager = new MapManager(this);
    this.mapManager.init("hub");

    this.scene.launch("UIScene");

    this.time.delayedCall(100, () => {
      if (this.scene.isActive("UIScene")) {
        this.uiScene = this.scene.get("UIScene") as UIScene;

        this.createPlayer();
        this.createInteractionZones();
        this.initAudioAndInputs();
        this.isPlayerReady = true;
        this.setupIntro();
      } else {
        this.createPlayer();
        this.createInteractionZones();
        this.initAudioAndInputs();
        this.isPlayerReady = true;
        this.setupIntro();
      }
    });
  }

  private createPlayer() {
    const spawn = this.mapManager.getSpawnPoint(
      this.targetSpawn
    ) || {
      x: 100,
      y: 100,
    };

    // Pega o sprite do registry - IMPORTANTE: deve ser um dos 3
    const playerSprite =
      this.registry.get("playerSprite") || "male-run";

    console.log(
      `Criando player com sprite: ${playerSprite}`
    );

    // Passa o spriteKey para o Player
    this.player = new Player(
      this,
      spawn.x,
      spawn.y,
      playerSprite
    );

    if (this.uiScene) {
      this.player.setUIScene(this.uiScene);
    }

    this.player.setFacing(this.facingDirection);

    if (this.mapManager.colliders.length > 0) {
      this.physics.add.collider(
        this.player,
        this.mapManager.colliders
      );
    }

    this.cameras.main.startFollow(
      this.player,
      true,
      0.09,
      0.09
    );
  }

  private setupIntro() {
    const hasSeenIntro = this.registry.get("hasSeenIntro");

    if (!hasSeenIntro) {
      this.time.delayedCall(1000, () => {
        this.isReading = true;
        this.isQuestionMode = true;
        this.isIntro = true;

        const playerName =
          this.registry.get("playerName") || "Bob";

        this.game.events.emit(
          "show-dialog",
          `SISTEMA: LOGIN EFETUADO COM SUCESSO!\n\n` +
            `Bem-vindo ao Hub Central, ${playerName}.\n\n` +
            `Este mundo virtual é uma representação interativa da minha carreira. ` +
            `Cada prédio aqui conecta a um projeto ou habilidade diferente.\n\n` +
            `Sinta-se livre para explorar, coletar referências e... se achar algum bug, considere uma "feature" não documentada.\n\n` +
            `Está pronto para começar?\n\n` +
            `[Y] Sim [N] Não`,
          280,
          400
        );

        this.registry.set("hasSeenIntro", true);
      });
    }
  }

  update() {
    if (!this.isPlayerReady) return;

    if (this.isQuestionMode) {
      this.handleQuestionInput();
      return;
    }

    if (this.isReading) {
      this.player.stopMovement();
      this.handleDialogInput();
    } else {
      if (this.player) {
        this.player.update();
      }
      this.handleInteractions();
    }
  }

  private initAudioAndInputs() {
    this.coinSound = this.sound.add("snd_coin", {
      volume: 0.5,
    });
    this.waterDropSound = this.sound.add("snd_water_drop", {
      volume: 1,
    });
    this.doorOpenSound = this.sound.add("snd_door_open", {
      volume: 1,
      seek: 3,
    });

    if (this.input.keyboard) {
      this.keyE = this.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.E
      );
      this.keyY = this.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.Y
      );
      this.keyN = this.input.keyboard.addKey(
        Phaser.Input.Keyboard.KeyCodes.N
      );
    }

    this.interactionPrompt = this.add
      .sprite(0, 0, "btn-e")
      .setDepth(100)
      .setVisible(false);
  }

  private createInteractionZones() {
    this.itemsZone = this.physics.add.staticGroup({
      classType: Phaser.GameObjects.Zone,
    });

    const layer = this.mapManager.interactionLayer;
    if (!layer) return;

    layer.objects.forEach((obj) => {
      const width = obj.width || 32;
      const height = obj.height || 32;
      const x = (obj.x || 0) + width / 2;
      const y = (obj.y || 0) + height / 2;
      const padding = 20;

      const zone = this.add.zone(
        x,
        y,
        width + padding,
        height + padding
      );
      zone.setData("tiledData", obj);
      this.itemsZone.add(zone);
    });
  }

  private startPromptLoop() {
    this.stopPromptLoop();

    this.tweens.add({
      targets: this.interactionPrompt,
      scaleY: 0.8,
      scaleX: 0.95,
      duration: 150,
      yoyo: true,
      repeat: -1,
      repeatDelay: 500,
      ease: "Quad.easeInOut",
      onUpdate: (
        tween,
        target: Phaser.GameObjects.Sprite
      ) => {
        const currentScale = target.scaleY;
        const calculatedOffset = (1 - currentScale) * 10;
        target.setData("offsetY", calculatedOffset);
      },
    });
  }

  private stopPromptLoop() {
    this.tweens.killTweensOf(this.interactionPrompt);
    this.interactionPrompt.setScale(1);
    this.interactionPrompt.setData("offsetY", 0);
  }

  private handleInteractions() {
    if (!this.player) return;

    this.currentInteractiveObject = null;
    let isOverlapping = false;

    this.physics.overlap(
      this.player,
      this.itemsZone,
      (player, zone) => {
        this.currentInteractiveObject =
          zone as Phaser.GameObjects.Zone;
        isOverlapping = true;
      }
    );

    if (isOverlapping && this.currentInteractiveObject) {
      if (!this.interactionPrompt.visible) {
        this.interactionPrompt.setVisible(true);
        this.startPromptLoop();
      }

      const animOffset =
        this.interactionPrompt.getData("offsetY") || 0;

      this.interactionPrompt.setPosition(
        this.player.x,
        this.player.y - 15 + animOffset
      );

      if (
        Phaser.Input.Keyboard.JustDown(this.keyE) &&
        !this.isReading
      ) {
        this.triggerAction(this.currentInteractiveObject);
      }
    } else {
      if (this.interactionPrompt.visible) {
        this.interactionPrompt.setVisible(false);
        this.stopPromptLoop();
      }
    }
  }

  private triggerAction(zone: Phaser.GameObjects.Zone) {
    const data = zone.getData("tiledData");
    const type =
      this.getTiledProperty(data, "actionType") || "dialog";

    switch (type) {
      case "dialog":
        this.handleDialogInteraction(data);
        break;
      case "fountain":
        this.handleFountainInteraction();
        break;
      case "warp":
        this.handleWarpAction(data);
        break;
      default:
        console.warn(
          `Ação desconhecida para o tipo: ${type}`
        );
    }
  }

  private handleWarpAction(data: any) {
    const sceneProperties = {
      mapKey: this.getTiledProperty(data, "mapKey"),
      facingDirection: this.getTiledProperty(
        data,
        "facingDirection"
      ),
      targetScene: this.getTiledProperty(
        data,
        "targetScene"
      ),
      targetSpawn: this.getTiledProperty(
        data,
        "targetSpawn"
      ),
    };

    if (sceneProperties.targetScene) {
      this.doorOpenSound.play();
      this.cameras.main.fadeOut(1000, 0, 0, 0);

      this.cameras.main.once(
        Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,
        () => {
          this.scene.start(sceneProperties.targetScene, {
            mapKey: sceneProperties.mapKey,
            spawnName: sceneProperties.targetSpawn,
            facingDirection:
              sceneProperties.facingDirection,
          });
        }
      );
    }
  }

  private handleDialogInteraction(data: any) {
    const msg =
      this.getTiledProperty(data, "message") || "...";
    this.isReading = true;
    this.game.events.emit("show-dialog", msg);
  }

  private handleFountainInteraction() {
    this.isQuestionMode = true;
    this.isReading = true;
    this.game.events.emit(
      "show-dialog",
      "A fonte emite uma aura estranha...\nDeseja jogar uma moeda?\n\n[Y] Sim [N] Não"
    );
  }

  private handleDialogInput() {
    if (Phaser.Input.Keyboard.JustDown(this.keyE)) {
      this.isReading = false;
      this.game.events.emit("hide-dialog");
    }
  }

  private handleQuestionInput() {
    if (Phaser.Input.Keyboard.JustDown(this.keyY)) {
      if (this.isIntro) {
        this.game.events.emit("hide-dialog");
        this.isQuestionMode = false;
        this.isReading = false;
        this.isIntro = false;
      } else {
        this.coinSound.play();
        setTimeout(() => {
          this.waterDropSound.play();
        }, 400);

        this.game.events.emit(
          "show-dialog",
          "Você fez um pedido silencioso..."
        );
        this.isQuestionMode = false;
      }
    } else if (Phaser.Input.Keyboard.JustDown(this.keyN)) {
      const playerName =
        this.registry.get("playerName") || "Bob";

      if (this.isIntro) {
        if (this.refuseCount > 5) {
          this.game.events.emit(
            "show-dialog",
            "OK, você venceu...",
            80,
            300
          );

          setTimeout(() => {
            window.location.href =
              "https://github.com/budacodes";
          }, 3000);
        } else {
          this.refuseCount++;

          this.game.events.emit(
            "show-dialog",
            `(${playerName}, vamo lá... me ajuda aqui... não estraga a imersão...)\n\n` +
              `Está pronto para começar?\n\n` +
              `[Y] Sim [N] Não`,
            120,
            300
          );
        }
      } else {
        this.game.events.emit("hide-dialog");
        this.isQuestionMode = false;
        this.isReading = false;
        this.isIntro = false;
      }
    }
  }

  private getTiledProperty(
    obj: any,
    propName: string
  ): any {
    if (!obj || !obj.properties) return null;
    if (Array.isArray(obj.properties)) {
      const prop = obj.properties.find(
        (p: any) => p.name === propName
      );
      return prop ? prop.value : null;
    } else {
      return obj.properties[propName];
    }
  }
}